/**
 * Created by Администратор on 14.07.2015.
 */

var fs = require('fs');

module.exports = {
    getTimeDir : function(prefix){
        var curDate = new Date();
        var dirName = curDate.getFullYear() + '-' + curDate.getMonth() + '-' + curDate.getDay() + '_'
            + curDate.getHours() + '-' + curDate.getMinutes() + '-' + curDate.getSeconds() + '-' + curDate.getMilliseconds();
        if (prefix){
           dirName = prefix + dirName;
        }
        return   global.basedir + dirName;
    },
    writeFile : function(dirName, fileName, data, cb){
        var filePath = dirName + '/' + fileName;
        fs.exists(dirName, function(exists){
            if (exists){
                fs.writeFile(filePath, data, cb);
            }
            else{
                fs.mkdir(dirName, function(err){
                    if (err){
                        cb(err)
                    }
                    else{
                        fs.writeFile(filePath, data, cb);
                    }
                });
            }
        });
    }
};