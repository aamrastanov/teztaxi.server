/**
 * Created by a.amrastanov on 29.09.2014.
 */

module.exports = function(parameterMap){
    this.taksistToken = parameterMap.token;
    this.orderId = parameterMap.id;
    this.distance = parameterMap.distance;
    this.doAction = function(){
        var order = require('orderHandler').getOrderById(this.orderId);
        if (order){
            order.setDistance(this.distance);
            var client = order.getClient();
            if (client !== undefined){
                var actionHandler = require('actionHandler');
                actionHandler.serverActionHandler.doAction({
                    action:actionHandler.serverActionsValues.sendTripDetailsToClient,
                    client: client,
                    order: order
                });
            }
        }
    }
};

