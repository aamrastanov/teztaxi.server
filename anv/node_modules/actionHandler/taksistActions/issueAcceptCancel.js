/**
 * Created by a.amrastanov on 13.08.2014.
 */

module.exports = function(parameterMap){
    this.taksistToken = parameterMap.token;
    this.issueId = parameterMap.issueId;
    this.doAction = function(){
        var taksistHandler = require('userHandler').taksistHandler;
        var taksist = taksistHandler.getUserByToken(this.taksistToken);
        var issue = require('issueHandler').getIssueById(this.issueId);
        if (issue){
            issue.removeTaksist(taksist);
            var client = issue.getClient();
            var actionHandler = require('actionHandler');
            actionHandler.serverActionHandler.doAction({
                action:actionHandler.serverActionsValues.sendTaksistRemoveToClient,
                taksist: taksist,
                clients: [client]
            });
        }
    }
};