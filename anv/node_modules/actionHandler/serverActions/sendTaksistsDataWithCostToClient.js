/**
 * Created by a.amrastanov on 02.02.2015.
 */

module.exports = function(parameterMap){
    this.action = parameterMap.action;
    this.client = parameterMap.client;
    this.taksistAnswers = parameterMap.taksistAnswers;
    this.doAction = function(){
        var taksistsAnswerValues = [];
        for(var index = 0; index < this.taksistAnswers.length; index++){
            var taksistAnswer = this.taksistAnswers[index];
            var taksist = taksistAnswer.taksist;
            taksistsAnswerValues.push({taksist: taksist.getToClientData(), cost: taksistAnswer.cost});
        }
        var message = require('contextHandler').NewMessage(this.action, {taksistAnswers: taksistsAnswerValues});
        this.client.send(message);
    }
};
