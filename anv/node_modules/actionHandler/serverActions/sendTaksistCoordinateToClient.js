/**
 * Created by a.amrastanov on 13.08.2014.
 */

module.exports = function(parameterMap){
    this.taksists = parameterMap.taksists;
    this.clients = parameterMap.clients;
    this.action = parameterMap.action;
    this.doAction = function(){
        var messageTaksists = [];
        for (var index = 0; index < this.taksists.length; index++){
            var taksist = this.taksists[index];
            messageTaksists.push(taksist.getCoordinateData());
        }
        var message = require('contextHandler').NewMessage(this.action, {taksists: messageTaksists});
        for(index = 0; index < this.clients.length; index++){
            var client = this.clients[index];
            if (client !== undefined){
                client.send(message);
            }
        }
    }
};
