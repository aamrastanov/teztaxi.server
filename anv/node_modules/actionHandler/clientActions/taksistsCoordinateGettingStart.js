/**
 * Created by a.amrastanov on 14.08.2014.
 */

module.exports = function(parameterMap){
    this.clientToken = parameterMap.token;
    this.doAction = function(){
        var userHandler = require('userHandler');
        var client = userHandler.clientHandler.getUserByToken(this.clientToken);
        client.needTaksistsCoordinate = true;
        var issue = client.getIssue();
        if (issue === undefined){
            return;
        }
        var taksists = issue.getTaksists();
        if (taksists.length > 0){
            var actionHandler = require('actionHandler');
            actionHandler.serverActionHandler.doAction({
                action:actionHandler.serverActionsValues.sendTaksistCoordinateToClient,
                taksists: taksists,
                clients: [client]
            });
        }
    }
};
