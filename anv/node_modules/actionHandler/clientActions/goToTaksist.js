/**
 * Created by a.amrastanov on 29.09.2014.
 */

module.exports = function(parameterMap){
    this.clientToken = parameterMap.token;
    this.doAction = function(){
        var userHandler = require('userHandler');
        var client = userHandler.clientHandler.getUserByToken(this.clientToken);
        var order = client.getOrder();
        if (order){
            var taksist = order.getTaksist();
            if (taksist){
                var actionHandler = require('actionHandler');
                actionHandler.serverActionHandler.doAction({
                    action:actionHandler.serverActionsValues.sendClientComingToTaksist,
                    taksist: taksist
                });
                require('db').orderActionDb.insertNew(order.data.id, require('db').ORDER_ACTIONS.GO_TO_TAKSIST);
            }
        }
    }
};
