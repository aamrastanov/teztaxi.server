/**
 * Created by a.amrastanov on 19.10.2014.
 */

module.exports = function(parameterMap){
    this.clientToken = parameterMap.token;
    this.doAction = function(){
        var clientHandler = require('userHandler').clientHandler;
        var client = clientHandler.getUserByToken(this.clientToken);
        clientHandler.addShowTaksistsRequestedUser(client);
        var taksistHandler = require('userHandler').taksistHandler;
        var taksists = taksistHandler.getAllUsers();
        var actionHandler = require('actionHandler');
        actionHandler.serverActionHandler.doAction({
            action:actionHandler.serverActionsValues.sendTaksistsDataToClient,
            clients: [client],
            taksists: taksists
        });
    }
};